<section>
    <div class="section-header">
        Thêm câu hỏi

        <button class="pull-right" mat-raised-button color="primary" (click)="save()" [disabled]="isRequesting"><fa-icon [icon]="faSave"></fa-icon> Lưu ({{questions.length}})</button>        
        <button class="pull-right" mat-raised-button color="accent" (click)="addQuestion()"><fa-icon [icon]="faPlus"></fa-icon> Thêm</button>

        <mat-form-field class="pull-right m-r-md">
            <mat-select placeholder="Chọn chuyên ngành" [(ngModel)]="selectedCategoryId">
                <mat-option *ngFor="let cat of categories" [value]="cat.id">
                {{ cat.name }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
</section>

<mat-card class="m-t-md question-card" *ngFor="let question of questions; let index = index;" [ngClass]="{'in-valid': question.isInvalid, 'is-saved': question.id}">
    <mat-form-field class="full-width">
        <textarea matInput [(ngModel)]="question.content" placeholder="Câu hỏi" matTextareaAutosize matAutosizeMinRows="1" matAutosizeMaxRows="5"></textarea>
    </mat-form-field>
    <div class="question-anwser-input">
        <mat-checkbox [(ngModel)]="question.is_anwser1_right"></mat-checkbox>
        <mat-form-field>
            <textarea matInput [(ngModel)]="question.anwser1" placeholder="Câu trả lời A" matTextareaAutosize matAutosizeMinRows="1" matAutosizeMaxRows="3"></textarea>
        </mat-form-field>
    </div>
    <div class="question-anwser-input">
        <mat-checkbox [(ngModel)]="question.is_anwser2_right"></mat-checkbox>
        <mat-form-field>
            <textarea matInput [(ngModel)]="question.anwser2" placeholder="Câu trả lời B" matTextareaAutosize matAutosizeMinRows="1" matAutosizeMaxRows="3"></textarea>
        </mat-form-field>
    </div>
    <div class="question-anwser-input">
        <mat-checkbox [(ngModel)]="question.is_anwser3_right"></mat-checkbox>
        <mat-form-field>
            <textarea matInput [(ngModel)]="question.anwser3" placeholder="Câu trả lời C" matTextareaAutosize matAutosizeMinRows="1" matAutosizeMaxRows="3"></textarea>
        </mat-form-field>
    </div>   
    <div class="question-anwser-input">
        <mat-checkbox [(ngModel)]="question.is_anwser4_right"></mat-checkbox>
        <mat-form-field>
            <textarea matInput [(ngModel)]="question.anwser4" placeholder="Câu trả lời D" matTextareaAutosize matAutosizeMinRows="1" matAutosizeMaxRows="3" (keydown.Tab)="addQuestion(index, $event)"></textarea>
        </mat-form-field>
    </div>
    <div class="text-right">
        <button mat-button color="warn" (click)="remove(question)" tabindex="-1"><fa-icon [icon]="faTrashAlt"></fa-icon> Xóa câu hỏi</button>
    </div>
</mat-card>

<mat-card class="text-right m-t-sm">
    <button mat-raised-button color="primary" (click)="save()" [disabled]="isRequesting"><fa-icon [icon]="faSave"></fa-icon> Lưu ({{questions.length}})</button>        
    <button mat-button color="primary" (click)="addQuestion()"><fa-icon [icon]="faPlus"></fa-icon> Thêm câu hỏi</button>
</mat-card>
